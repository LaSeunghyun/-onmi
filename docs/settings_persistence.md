# 설정 저장 및 동기화 흐름

## 개요
- 설정 화면에서 키워드 관리와 일일 리포트 알림 시간을 한 번에 저장하도록 플로우를 개편했습니다.
- 변경 사항은 사용자가 `저장` 버튼을 눌렀을 때에만 서버로 전송되며, 각 사용자의 키워드 및 알림 시간이 독립적으로 유지됩니다.

## 변경 감지
- 화면 최초 진입 시 서버에서 내려준 키워드 목록과 알림 시간을 로컬 상태에 복사합니다.
- 키워드를 추가하거나 삭제하거나 알림 시간을 수정하면 로컬 상태만 변경하고 `_hasChanges` 플래그로 버튼 활성화를 제어합니다.
- 키워드 비교는 텍스트 배열을 기준으로 수행하며, 순서를 유지해 사용자의 입력 흐름을 그대로 반영합니다.

## 저장 절차
1. `저장` 버튼 클릭 시 키워드 추가/삭제 목록과 알림 시간 변경 여부를 계산합니다.
2. 삭제 대상 키워드는 식별자를 기준으로 순차적으로 제거합니다.
3. 신규 키워드는 기존 REST API(`POST /keywords`)를 재사용하여 생성합니다.
4. 마지막으로 사용자 선호도 API(`PUT /preferences`)를 호출해 알림 시간을 업데이트합니다.
5. 모든 호출 성공 시 키워드 목록을 다시 로드하여 전역 상태(`keywordProvider`)와 캐시를 최신 상태로 맞춥니다.

## 예외 처리
- 어느 단계에서든 에러가 발생하면 저장 과정을 중단하고 사용자에게 실패 메시지를 표시합니다.
- 저장 실패 시 기존 서버 상태를 다시 조회하지 않으며, 사용자는 수정된 로컬 값을 유지한 채로 재시도할 수 있습니다.

## 추가 고려 사항
- 저장 진행 중에는 키워드 입력과 삭제를 비활성화하여 경쟁 조건을 예방합니다.
- 저장 완료 후에는 로컬 상태와 초기 상태를 동일하게 갱신하여 버튼이 다시 비활성화됩니다.
- 향후 키워드 개수가 증가할 경우를 대비해 API 호출은 순차적으로 처리하되 필요 시 병렬 처리를 도입할 수 있도록 분리해 두었습니다.






